<!DOCTYPE HTML>
<html>
<head>
  <title>Mobile Banking App Adoption — Decision Tree (Case 2)</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="assets/css/main.css" />
  <style>
    .post-hero{margin:0 0 1rem}
    .post-hero img{display:block;max-width:100%;height:auto;border-radius:8px}
    .byline{font-size:.95rem;color:#777;margin:.4rem 0 .6rem}
    .updated{font-size:.9rem;color:#666;margin-bottom:1rem}
    .kpis{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:.75rem;margin:1rem 0}
    .kpi{background:#fff;border:1px solid #eee;border-radius:12px;padding:.8rem 1rem;text-align:center}
    .kpi .h{font-size:.8rem;color:#666;margin-bottom:.2rem}
    .kpi .v{font-size:1.15rem;font-weight:700}
    .outline{background:#fafafa;border:1px solid #eee;border-radius:10px;padding:1rem;margin:1.25rem 0}
    .outline ol{margin:.35rem 0 0 1.25rem}
    .fig{margin:1.1rem 0;text-align:center}
    .fig img{max-width:100%;height:auto;display:block;margin:0 auto;border-radius:8px}
    .fig small{display:block;color:#666;margin-top:.4rem}
    .callout{background:#fff7e6;border:1px solid #ffe2ad;border-radius:10px;padding:1rem;margin:1.1rem 0}
    .note{background:#eef7ff;border:1px solid #cfe5ff;border-radius:10px;padding:1rem;margin:1.1rem 0}
    .warn{background:#fff1f0;border:1px solid #ffd6d3;border-radius:10px;padding:1rem;margin:1.1rem 0}
    .divider{height:1px;background:#eee;margin:1.25rem 0}
    .table-wrapper table td,.table-wrapper table th{vertical-align:top}
    .badge{display:inline-block;background:#f2f2f2;border-radius:999px;padding:.2rem .6rem;margin:.15rem .35rem 0 0}
    pre.code{background:#0f172a;color:#e5e7eb;border-radius:10px;padding:1rem;overflow:auto}
  </style>
</head>
<body>
<div id="wrapper">

  <header id="header">
    <a href="index.html" class="logo">OBI</a>
  </header>

  <div id="main">
    <section class="post">

      <!-- HERO -->
      <div class="post-hero">
        <img src="images/mobile_banking_tree.png" alt="Mobile banking — pruned decision tree hero">
      </div>

      <!-- TITLE + META -->
      <h2>Mobile Banking App Adoption — Decision Tree (Case Study)</h2>
      <p class="byline"><strong>Obi Oleru</strong> • Portfolio Case • 8–12 min read</p>
      <p class="updated">Updated: Aug 2025</p>

      <!-- Quick links -->
      <p>
        <a class="badge" href="code/mobile_banking_tree.R" download>Download R Script</a>
        <a class="badge" href="data/bua6315_mod5_data_mobile_banking.xlsx" download>Dataset (XLSX)</a>
        <a class="badge" href="outputs/mobile_banking_scores.csv" download>Scores: 20 New Customers</a>
      </p>

      <!-- TOPLINE KPIs -->
      <div class="kpis">
        <div class="kpi"><div class="h">Split</div><div class="v">50/30/20</div></div>
        <div class="kpi"><div class="h">Seed</div><div class="v">12345</div></div>
        <div class="kpi"><div class="h">Model</div><div class="v">Pruned Tree (Gini)</div></div>
        <div class="kpi"><div class="h">Deliverables</div><div class="v">ROC, Confusion, Scores</div></div>
      </div>

      <!-- INTRO / WHY -->
      <p>
        Sunnyville Bank is rolling out a mobile app and wants to identify customers most likely to adopt it. That lets the
        bank prioritize its marketing spend (email/SMS in-app prompts), optimize onboarding, and measure conversion lift.
        This project builds a clear, explainable **classification tree** and evaluates it out-of-sample. The end product is a
        scored list of customers with adoption probabilities so Marketing can run a top-N campaign, and Ops can prepare
        branch staff for a channel shift.
      </p>

      <div class="outline">
        <strong>What’s inside</strong>
        <ol>
          <li><a href="#framing">Business framing & success criteria</a></li>
          <li><a href="#data">Data & assumptions</a></li>
          <li><a href="#eda">EDA & preprocessing</a></li>
          <li><a href="#model">Modeling approach</a></li>
          <li><a href="#perf">Performance (test set) & threshold thinking</a></li>
          <li><a href="#tree">Interpreting the tree</a></li>
          <li><a href="#score">Scoring 20 new customers & targeting policy</a></li>
          <li><a href="#risks">Risks, ethics, & limitations</a></li>
          <li><a href="#next">Next steps & model roadmap</a></li>
          <li><a href="#appendix">Appendix — Reproducible R</a></li>
        </ol>
      </div>

      <!-- 1. BUSINESS FRAMING -->
      <h3 id="framing">1) Business framing & success criteria</h3>
      <p>
        The bank’s objective is to **increase mobile adoption** (reduces teller load, increases digital engagement, and
        unlocks self-service features like mobile deposit). A good model should (1) correctly rank customers by likelihood,
        (2) be simple enough to explain to Marketing & Compliance, and (3) produce a **targetable list** with measurable
        ROI (CPA/LTV). Because the cost of a false positive (outreach to a non-adopter) is low compared to the benefit of a
        new digital user, **recall** (sensitivity) and **ranking quality (AUC)** matter more than raw accuracy at a single
        threshold.
      </p>

      <!-- 2. DATA -->
      <h3 id="data">2) Data & assumptions</h3>
      <p><strong>Labeled set:</strong> 500 customers. <strong>Scoring set:</strong> 20 new customers.</p>
      <div class="table-wrapper">
        <table>
          <thead><tr><th>Field</th><th>Type</th><th>Notes</th></tr></thead>
          <tbody>
            <tr><td>App</td><td>Target (0/1)</td><td>Downloaded the mobile app (1) or not (0)</td></tr>
            <tr><td>Age</td><td>Numeric</td><td>Years</td></tr>
            <tr><td>Gender</td><td>Categorical</td><td>Male / Female</td></tr>
            <tr><td>Edu</td><td>Ordered factor</td><td>Education level (1 &lt; 2 &lt; 3)</td></tr>
            <tr><td>Income</td><td>Numeric</td><td>In $1,000s</td></tr>
            <tr><td>CD</td><td>Categorical</td><td>Certificate of Deposit (Y/N)</td></tr>
          </tbody>
        </table>
      </div>
      <div class="note">
        <strong>Protocol from the case:</strong> Partition 50% / 30% / 20% (Train / Validation / Test) using seed
        <code>12345</code>. Treat character fields as categorical; numerical otherwise.
      </div>

      <!-- 3. EDA -->
      <h3 id="eda">3) EDA & preprocessing</h3>
      <ul>
        <li><strong>Missingness & types:</strong> No critical missing fields; coerced <code>Gender</code>, <code>Edu</code>, and <code>CD</code> to factors (ordered for <code>Edu</code>).</li>
        <li><strong>Leakage check:</strong> No post-outcome features; all predictors are pre-adoption attributes.</li>
        <li><strong>Class balance:</strong> Positive rate is non-trivial; however, on the test set the pruned tree tended to over-predict “download,” a hint to use ranking/probabilities or reweighting.</li>
        <li><strong>Univariate signals:</strong> Customers with CDs and higher income show stronger propensity to adopt the app; age has a mild negative association.</li>
      </ul>

      <!-- 4. MODEL -->
      <h3 id="model">4) Modeling approach</h3>
      <p>
        I trained a **classification tree** (rpart, Gini) on the training split, selected the **complexity parameter (cp)**
        on the validation split (maximizing AUC), and **pruned** to avoid overfitting. Final metrics are reported on the
        untouched test set at a 0.50 cutoff. I also compared against a logistic baseline (not shown here; tree chosen for
        transparency and segment-friendly rules).
      </p>
      <ul>
        <li><strong>Why a tree?</strong>  Rules are easy to explain (“If CD=Yes and Income ≥ X…”). That helps Compliance and gives Marketing clear segments.</li>
        <li><strong>Hyperparameters:</strong> Gini; cp grid from the fitted <code>cptable</code>; <code>minsplit=10</code>.</li>
        <li><strong>Probability outputs:</strong> Used for ranking and ROC; avoid overreliance on a single cutoff.</li>
      </ul>

      <!-- 5. PERFORMANCE -->
      <h3 id="perf">5) Performance (test set) & threshold thinking</h3>
      <div class="callout">
        <p style="margin:.25rem 0;"><strong>Test metrics @0.50:</strong> Accuracy <strong>0.45</strong>, Specificity <strong>0.00</strong>, Sensitivity <strong>1.00</strong>, Precision <strong>0.45</strong>.</p>
        <p style="margin:.25rem 0;">This indicates the tree classified nearly everyone as “download.” While recall is perfect, specificity is zero. That’s acceptable if we use probabilities for **ranking** (top-N outreach), or we can move the threshold upward / add class weights to trade recall for precision.</p>
      </div>

      <div class="fig">
        <img src="images/mobile_banking_roc.png" alt="ROC curve for the pruned tree (test set)">
        <small>ROC summarizes ranking quality across all thresholds. Use it to select an operating point that matches budget and campaign goals.</small>
      </div>

      <p>
        **Threshold strategy:** If each outbound contact costs pennies but an adopter yields high LTV, prioritize **recall** by
        contacting the top X% by probability (e.g., top 30%). If budget is tight, target a smaller top slice to boost **precision**.
        I recommend validating two policies: <em>(a)</em> top-N ranking and <em>(b)</em> optimized cutoff by Youden’s J (sensitivity + specificity − 1) on validation.
      </p>

      <!-- 6. TREE INTERPRETATION -->
      <h3 id="tree">6) Interpreting the tree</h3>
      <div class="fig">
        <img src="images/mobile_banking_tree.png" alt="Pruned decision tree (schematic)">
        <small>Example schematic: Root split on CD; subsequent splits on Age and Income.</small>
      </div>
      <ul>
        <li><strong>CD at the root:</strong> Customers with a CD tend to be more engaged and receptive to new banking features; the model splits here first.</li>
        <li><strong>Income split:</strong> Within CD holders, higher income further increases adoption probability—consistent with smartphone penetration and perceived value of mobile features.</li>
        <li><strong>Age split:</strong> Among non-CD customers, younger segments are more likely to try the app; tailor onboarding (quick demo, mobile deposit nudge).</li>
      </ul>

      <!-- 7. SCORING & POLICY -->
      <h3 id="score">7) Scoring 20 new customers & targeting policy</h3>
      <p>
        The best-pruned tree scored all 20 new customers. With a 0.50 threshold, **all 20 are predicted to download**; the first
        customer shows probability ≈ <strong>0.532</strong>. Rather than treating that as a binary decision, I recommend **ranking by
        probability** and choosing a contact band (e.g., top 20%) to respect campaign budget.
      </p>
      <div class="callout">
        <strong>Targeting policy:</strong> 
        <ol>
          <li>Sort customers by predicted probability (descending).</li>
          <li>Pick a top-N (or a cutoff) that matches budget and expected CPA/LTV.</li>
          <li>Message CD holders with high probability using feature-led creative (mobile deposit, alerts, Zelle).</li>
          <li>For younger, non-CD high-probability customers, emphasize convenience and security.</li>
        </ol>
      </div>

      <!-- 8. RISKS & LIMITATIONS -->
      <h3 id="risks">8) Risks, ethics, & limitations</h3>
      <ul>
        <li><strong>Fairness & compliance:</strong> Avoid using protected attributes for targeting; when age is used, ensure usage is appropriate and non-discriminatory.</li>
        <li><strong>Data drift:</strong> App adoption propensity changes over time; schedule periodic re-training and monitoring.</li>
        <li><strong>Imbalanced behavior:</strong> If many customers look “almost positive,” trees can over-predict. Prefer ranking and consider **class weights** / **cost-sensitive** training.</li>
        <li><strong>Small sample risk:</strong> With 500 rows, trees can be unstable; use validation rigor and sanity-check splits.</li>
      </ul>

      <!-- 9. NEXT STEPS -->
      <h3 id="next">9) Next steps & model roadmap</h3>
      <ul>
        <li><strong>Cost-sensitive tree:</strong> Penalize false negatives more if a missed adopter is expensive.</li>
        <li><strong>Logistic + regularization:</strong> Build a calibrated baseline and compare AUC/PR curves.</li>
        <li><strong>Ensemble (RF/GBM):</strong> Test random forest / gradient boosting for lift; keep the tree for explainability.</li>
        <li><strong>Calibration:</strong> Isotonic or Platt scaling to improve probability quality for ranking.</li>
        <li><strong>Feature expansion:</strong> Tenure, digital history (e-statements), product depth, branch distance.</li>
        <li><strong>Champion–challenger:</strong> Run the pruned tree as champion; test challengers over a 4-week campaign.</li>
      </ul>

      <div class="divider"></div>

      <!-- 10. APPENDIX -->
      <h3 id="appendix">Appendix — Reproducible R (excerpt)</h3>
      <p>Full script includes split, training, pruning via validation AUC, test evaluation, ROC export, and scoring of 20 new customers.</p>
      <pre class="code"><code># Packages
library(readxl); library(dplyr); library(rpart); library(pROC)

# Load & prep
df    &lt;- read_excel("data/bua6315_mod5_data_mobile_banking.xlsx", sheet=1)
new20 &lt;- tryCatch(read_excel("data/bua6315_mod5_data_mobile_banking.xlsx", sheet=2), error=function(e) NULL)

df &lt;- df %&gt;% mutate(Gender=factor(Gender), Edu=factor(Edu, ordered=TRUE), CD=factor(CD), App=factor(App, levels=c(0,1)))

# Split 50/30/20 (seed=12345)
set.seed(12345); n &lt;- nrow(df); idx &lt;- sample.int(n, n)
n_tr &lt;- floor(.5*n); n_val &lt;- floor(.3*n)
tr &lt;- df[idx[1:n_tr], ]; val &lt;- df[idx[(n_tr+1):(n_tr+n_val)], ]; te &lt;- df[idx[(n_tr+n_val+1):n], ]

# Train wide tree then prune by validation AUC
fit &lt;- rpart(App ~ Age+Gender+Edu+Income+CD, data=tr, method="class",
             control=rpart.control(cp=.001, minsplit=10, xval=10))
cps &lt;- fit$cptable[, "CP"]
auc_by_cp &lt;- sapply(cps, function(cp){
  pr &lt;- predict(prune(fit, cp=cp), newdata=val, type="prob")[, "1"]
  roc(response=val$App, predictor=pr, levels=c("0","1"), direction="&lt;")$auc
})
best_cp &lt;- cps[which.max(auc_by_cp)]
tree   &lt;- prune(fit, cp=best_cp)

# Test metrics @0.50
p_te &lt;- predict(tree, newdata=te, type="prob")[, "1"]
y    &lt;- te$App
yhat &lt;- ifelse(p_te &gt;= .50, "1", "0")
acc  &lt;- mean(yhat==y)
spec &lt;- with(table(y, yhat), ifelse(("0" %in% rownames(.) &amp; "1" %in% colnames(.)),
         .["0","0"]/(.["0","0"]+.["0","1"]), NA))
sens &lt;- with(table(y, yhat), ifelse(("1" %in% rownames(.) &amp; "1" %in% colnames(.)),
         .["1","1"]/(.["1","1"]+.["1","0"]), NA))
prec &lt;- with(table(y, yhat), ifelse(("1" %in% rownames(.) &amp; "1" %in% colnames(.)),
         .["1","1"]/(.["1","1"]+.["0","1"]), NA))
cat(sprintf("TEST — Acc=%.3f Spec=%.3f Sens=%.3f Prec=%.3f\n", acc, spec, sens, prec))

# ROC / AUC
auc_te &lt;- as.numeric(roc(y, p_te, levels=c("0","1"), direction="&lt;")$auc)
cat(sprintf("TEST — AUC=%.3f\n", auc_te))

# Score 20 new
if (!is.null(new20)) {
  new20 &lt;- new20 %&gt;% mutate(Gender=factor(Gender, levels=levels(df$Gender)),
                             Edu=factor(Edu, ordered=TRUE, levels=levels(df$Edu)),
                             CD=factor(CD, levels=levels(df$CD)))
  p_new &lt;- predict(tree, newdata=new20, type="prob")[, "1"]
  class  &lt;- ifelse(p_new &gt;= .50, 1, 0)
  scored &lt;- cbind(new20, prob_app=round(p_new,3), predict_app=class)
  write.csv(scored, "outputs/mobile_banking_scores.csv", row.names=FALSE)
}
</code></pre>

      <p style="margin-top:.75rem;">
        <a class="badge" href="index.html">← Back to Portfolio</a>
        <a class="badge" href="outputs/mobile_banking_scores.csv" download>Download Scores CSV</a>
      </p>

    </section>
  </div>

  <footer id="footer">
    <section class="split contact">
      <section class="alt"><h3>Location</h3><p>Fort Worth, TX</p></section>
      <section><h3>Email</h3><p><a href="mailto:optimalbusinessinsights@gmail.com">optimalbusinessinsights@gmail.com</a></p></section>
      <section><h3>GitHub</h3><p><a href="https://github.com/OBOptics">OBOptics</a></p></section>
    </section>
  </footer>

  <div id="copyright">
    <ul><li>&copy; OBI</li><li>Theme: <a href="https://html5up.net">HTML5 UP</a></li></ul>
  </div>
</div>

<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>
</body>
</html>
